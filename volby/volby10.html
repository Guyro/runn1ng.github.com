<script>
function spocti_d_hondt(mandatu, hlasy) {
    var skore=[];
    for (var delitel =1; delitel<=mandatu;delitel++) {
         for (var strana in hlasy) {
             var vydeleno=hlasy[strana]/delitel;
             var obje={};
             obje["hlasy"]=vydeleno;
             obje["strana"]=strana;
             skore.push(obje);
         }
    }
    skore.sort(function(a,b){
        if (b["hlasy"]==a["hlasy"]) {
            //simulace losu :)
            return Math.random()-0.5
        }
        return b["hlasy"]-a["hlasy"];
    });
    var vysledek=[];
    for (i=0; i<mandatu;i++) {
        vysledek.push(skore[i].strana);
    }
    return vysledek;
}

function spocti_kraj(mandatu, hlasu, procenta) {
    var hlasy_abs=[];
    for (var strana in procenta) {
        if (procenta[strana]>=5) {
            hlasy_abs[strana]=procenta[strana]/100*hlasu; //nezaokrouhluju, protoze je to vsechno stejne hrozne hrube
        }
    }
    return spocti_d_hondt(mandatu, hlasy_abs);
}

function statistika(mandaty) {
    var res={};
    for (var i in mandaty) {
        strana = mandaty[i];
        if (typeof res[strana]!=="undefined") {
            res[strana]++;
        } else {
            res[strana]=1;
        }
    }
    return res;
}

function spocti_cr(procenta) {
    return spocti_kraj(25,637328, procenta).//praha
           concat(spocti_kraj(24,630203,procenta)).//s cechy
           concat(spocti_kraj(13,333117,procenta)). //j cechy
           concat(spocti_kraj(11,280264,procenta)). //plzen
           concat(spocti_kraj(5,130162,procenta)).//karlovarsky
           concat(spocti_kraj(14,365800,procenta)).//usti
           concat(spocti_kraj(8,213917,procenta)).//liberec
           concat(spocti_kraj(11,288981,procenta)).//hradec
           concat(spocti_kraj(10,268863,procenta)).//pardubice
           concat(spocti_kraj(10,270872,procenta)).//vysocina
           concat(spocti_kraj(23,597136,procenta)).//j morava
           concat(spocti_kraj(12,321871,procenta)).//olomouc
           concat(spocti_kraj(12,308592,procenta)).//zlin
           concat(spocti_kraj(22,308592,procenta));//moravskoslezsky
}

console.log(statistika(spocti_cr({vv:10.88,kscm:11.27,cssd:22.08,top:16.70,ods:20.22})));
</script>
Hello. ABCD
